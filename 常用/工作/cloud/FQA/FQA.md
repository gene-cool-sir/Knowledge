# FQA

**获取Suunto Cloud API和API协议**

我可以获得访问Suunto API区域吗？- 这取决于你的工作内容。我们可以为商业和非商业用途构建工具/应用/服务的公司/组织提供访问权限。然而，我们不会为个人使用提供此权限。

我在哪里可以获取Suunto Cloud API和Suunto API区域的访问权限？- 你可以通过在Suunto网站上填写申请表格来请求获得Suunto合作伙伴计划的访问权限。

我在哪里签署API协议？- Suunto合作伙伴计划申请表格中有一个章节，询问你有兴趣与Suunto合作的主题。如果你选择了Suunto Cloud API，将会提供API协议。你需要签署这个协议，同时与API协议一同签署的还可以是开发者。

开发人员如何获取API区域的访问权限？- 在Suunto合作伙伴计划申请表格中，你需要提供需要访问权限的开发人员。确保你的团队成员都在这个网络表单中提供了信息。

我会在多久内收到回复？- 如果你被接受进入Suunto合作伙伴计划，你应该会在两周内收到回复。

我收到我们已被接受的信息，但我还没有收到API区域的邀请，我该怎么办？- 请确保你已经检查了垃圾邮件箱，同时询问你的同事是否收到了邀请。根据这些情况，发送电子邮件至partners\@suunto.com。我们将会与你联系，确保你的团队获得所需的凭证。

我们是一家正在实现与Suunto Cloud API集成的软件开发公司，应该如何开始？- 请要求你的客户公司填写合作伙伴计划申请，以便他们可以签署API协议。然后他们可以提供你的开发人员信息，以便你进行集成实现。

**Suunto Cloud API内容**

**从Suunto Cloud API中可以获取哪些内容？- 你可以获取锻炼和每日活动数据。**

每日活动包含哪些数据？- 包括每日步数和卡路里。

锻炼数据包含哪些内容？- 锻炼数据存储在Suunto手表中，根据型号不同而不同。这些数据可以包含GPS轨迹、心率样本、圈数数据。你可以从https\://apimgmtstfbqznm5nc6zmvgx.blob.core.windows.net/content/MediaLibrary/docs/DeviceProductIDs.pdf查看设备的功能。

**我可以向Suunto Cloud API推送哪些内容？- 你可以推送路线和锻炼数据。**

什么是路线？-\*\* 路线是GPX文件\*\*，其中包含经过增强的路线位置数据和航点。这些路线会在Suunto应用中显示，并可以同步到Suunto手表用于导航。

锻炼推送是什么意思？- **你可以将锻炼数据以FIT文件格式推送到用户账户**。这些数据将以与使用Suunto设备跟踪的数据类似的方式显示。

是否有可用的睡眠数据？- Suunto Cloud API**目前还不支持获取/推送睡眠数据**。这些数据由Suunto设备跟踪和存储，但尚未从Suunto Cloud API中获取。

是否有兴趣点（POIs）可用？- Suunto Cloud API**目前还不支持兴趣点**。这些在Suunto手表中用于导航，但尚未被Suunto Cloud API支持。

是否有个人数据可用？- 个人数据，如体重数据或心率区域，目前还不可从Suunto Cloud API获取。

如何知道API中是否有新内容可用？- 一旦你注册为Suunto合作伙伴计划成员，你将同时收到我们发送给参与者的新功能通知的电子报。
\*\*
Movescount和Movescount API\*\*

我以前与Movescount API兼容，Movescount API与Suunto Cloud API之间的关系是什么？- 这两者没有任何共同之处。Movescount是完全不同的系统。为了保持与Suunto兼容性，你需要使用Suunto Cloud API进行连接。

对于连接了Movescount的Suunto用户，我该说些什么？- Movescount API将继续存在，以便兼容性在未来仍能工作，但我们鼓励用户转向Suunto App，因此Suunto Cloud API将成为Suunto兼容性的途径。

如何最好地使用Suunto App？- Movescount用户可以将他们的锻炼历史转移到Suunto App中。他们还可以将Suunto手表连接到Suunto App中。最新的Suunto手表Suunto 3、Suunto 5和Suunto 7只与Suunto App兼容。

\*\*多个应用程序
\*\*
我们有多个应用程序需要具有Suunto兼容性，如何管理？- 如果你有多个不同的应用程序/服务，例如测试环境和生产环境，或两个不同的品牌服务，你将需要两个不同的帐户。一个帐户只能有一个应用程序。一个帐户与一个电子邮件地址相关联。如果你需要运行10个不同的连接，提供我们10个不同的电子邮件地址。

\*\*授权流程
\*\*
从哪里开始？- 阅读快速入门指南。这将为你提供开始开发的几个关键步骤。<https://apizone.suunto>

.com/how-to-start

我在哪里可以设置redirect\_uri和其他应用程序参数？- 你可以在OAuth和应用程序设置中进行此操作。这在你的用户配置文件中。

是否有移动应用程序身份验证？- 授权过程针对移动使用进行了优化。目前没有移动SDK。

我不知道如何填写**Ocp-Apim-Subscription-Key头参数？- cloudapi-oauth服务不需要Ocp-Apim-Subscription-Key参数。**

如何将**Suunto用户身份与我们的用户身份关联起来**？- 用户已经授权你获取他/她的数据，他/她将被重定向到提供的redirect\_uri。这个redirect\_uri在应用程序设置下的个人资料中给出。授权码会添加到重定向URL中。使用授权码获取JWT令牌。请求规范可以在这里找到。保存JWT令牌信息。**在JWT令牌的用户字段中，你将收到Suunto用户名，你可以在以后用于处理有关新用户活动/锻炼的通知。**

我们尝试实施授权，遵循您的指南[https://apizone.suunto.com/how-to-start，但我们卡在4.5这一步。无论我们发送什么数据以及以什么格式，我们总是收到类似的响应{](https://apizone.suunto.com/how-to-start，但我们卡在4.5这一步。无论我们发送什么数据以及以什么格式，我们总是收到类似的响应{ "https://apizone.suunto.com/how-to-start，但我们卡在4.5这一步。无论我们发送什么数据以及以什么格式，我们总是收到类似的响应{") "status": 401, "error": "Unauthorized", "message": "Unauthorized", "path": "/oauth/token" }。- Token终端点受到基本身份验证方案的保护。授权头必须添加：如果用户代理希望发送用户ID“Aladdin”和密码“open sesame”，**则会使用以下头字段： Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=**= 如RFC7617所指定。授权头格式- Authorization: Basic Base64(username:password)。

什么是JWT令牌？- JSON Web Tokens是一种用于在两个方之间安全表示声明的开放行业标准RFC 7519方法。你可以从jwt.io阅读有关JWT令牌的所有内容。

我如何查看令牌包含什么内容？- 你可以使用jwt.io调试令牌。只需将令牌放入编码字段中，查看解码字段中的令牌中的信息。

**每当我们收到有关锻炼已完成的通知时，我们希望获得有关锻炼的完整信息**。我们将请求发送到[**https://cloudapi.suunto.com/v2/workouts**](https://cloudapi.suunto.com/v2/workouts，但我们实际上不太明白我们需要发送哪种令牌。我们尝试了发送从请求中收到的基本令牌，但失败了，因为服务器期望JWT。- "https://cloudapi.suunto.com/v2/workouts")[，但我们实际上不太明白我们需要发送哪种令牌。我们尝试了发送从请求中收到的基本令牌，但失败了，因为服务器期望JWT。-](https://cloudapi.suunto.com/v2/workouts，但我们实际上不太明白我们需要发送哪种令牌。我们尝试了发送从请求中收到的基本令牌，但失败了，因为服务器期望JWT。- "，但我们实际上不太明白我们需要发送哪种令牌。我们尝试了发送从请求中收到的基本令牌，但失败了，因为服务器期望JWT。-") JWT令牌包含访问令牌和刷新令牌。开发人员必须使用访问令牌来访问API。在JWT令牌中，你可以找到访问和刷新令牌：{"access\_token":"","token\_type":"bearer" ... 为了访问API，必须添加授权头："Authorization: Bearer (access token)"。

**Webhooks-获取最新的锻炼或每日活动**

**如何确保我在Suunto云中存储锻炼后立即获取用户的锻炼**？- 使用webhook方法获取有关新锻炼的通知。这使你能够在锻炼存储在Suunto Cloud后立即从API中获取锻炼数据。

什么是Webhook？- Webhook有时也称为反向API。这些Webhook/通知的主要目的是**确保你不需要轮询服务器，而是可以通过获取信息来保持实时更新数据，从而决定何时获取**。随着新的锻炼出现，你立即获得信息，然后可以立即获取最新的锻炼。这还确保我们不会因大量这些请求而只在真正需要时才收到。

我在哪里设置Webhook？- 你可以在Suunto Apizone的应用程序OAuth设置下的个人资料中设置Webhook。实际上，**你设置连接的地址，这应该在互联网上可以公开访问**（即不要使用本地计算机地址）。

Webhook会发生什么？- 一旦你注册了连接地址，每当新的锻炼被同步到服务器时，你的应用程序将收到一个HTTP请求。根据此信息，你应该立即获取锻炼数据，以保持你的系统实时更新。

**通知中有什么内容？**- Suunto合作伙伴通知**在POST请求中传递了两个参数：用户名和锻炼ID**。用户名参数可用于查找适当的访问令牌（在JWT令牌中，用户名存储在用户字段中）。锻炼ID参数可用于获取正确的FIT文件。

如何确保在将每日活动存储到Suunto云后立即获得用户的每日活动？- 对于活动数据，没有Webhook/通知模型。

确保从用户中获得最新信息的最佳方法是什么？ 设置用于锻炼数据的Webhook。 如果你想获得每日活动，例如步数，请在获取锻炼数据的同时获取每日活动数据。Suunto手表通常在创建新锻炼时将其同步到Suunto App，因此在Suunto云中有新的锻炼时，也会收到新的步数数据。**如果一整天都没有用户的锻炼通知，然后尝试每天获取一次最新的每日活动数据，以保持更新**。你还可以在你的应用程序/服务中创建交互，以确保数据是最新的。例如，**通过提供“同步”按钮或特定视图，** 如果用户打开它，

会执行数据获取。避免不必要的API轮询，因此如果在没有新数据的情况下进行了大量API调用，请重新考虑你的实施方法。

测试

我如何测试我正在使用的调用？- 在ApiZone的API描述页面上有一个“试一试”按钮。你需要提供授权和Ocp-Apim-Subscription-Key，以便测试API。

如何测试集成？ 通过使用带有Suunto App的Suunto手表，可以测试集成。使用API的开发是在生产系统中完成的，因此你可以使用来自你的测试人员的真实数据进行测试。

还有可用的示例FIT文件，你可以使用这些示例来检查你的解决方案在不同场景下如何利用FIT文件，例如使用游泳数据、多项运动等。

如何获取用于测试的FIT文件？- 你可以从这里找到这些文件。

我能从Suunto获取用于测试的产品吗？- 我们无法为合作伙伴公司提供Suunto手表，但如果你与我们联系，我们可以为Suunto手表的合作伙伴公司提供交易。

在使用开发者API进行测试时有什么限制？- 开发者API的功能与生产API相同。但是，**你可以进行有限的调用，因为有速率限制。**

发布

我如何进行发布？- 当你准备好实施时，请订阅生产API。然后，我们将为你连接下一步。

如何发布我的服务/应用程序？- 请确保在API区域中发布了所有关键内容。你可以在你的个人资料中找到这些内容。

**我如何让我的应用程序/工具/服务出现在Suunto App中？**- 一旦你完成了实施并在API区域中添加了有关应用程序的所有内容，**请订阅生产。一旦我们接受了你的订阅**，你的应用程序将会显示在Suunto App中。

**我需要将我的应用程序发布到Suunto ZH的中国市场，我该怎么办？**- 请在ApiZone进行开发工作。一旦你准备就绪，请与我们联系。然后，我们将为你提供访问我们的中国API的权限。从技术上讲，这是相同的，只是具有不同的地址端点。

**我想将我的应用程序/服务包含在Suunto Valuepack中，我该怎么办？**- Suunto Valuepack是Suunto合作伙伴为Suunto手表购买者提供的一系列优惠。这些优惠是比公开的优惠更优惠的交易，仅适用于新的Suunto手表购买者。请通过[partners@suunto.com](mailto:partners@suunto.com "partners@suunto.com")与我们联系，以了解更多信息。

错误/问题

在**使用锻炼API时，我收到了错误500**，其中包含“内部服务器错误”的描述，这是什么意思，我可以做什么？- 常见的问题是，当你尝试获取锻炼时，**可能没有正确提供参数作为锻炼密钥。锻炼密钥格式：十六进制字符串，密钥长度为12个字节。**

我**收到了错误401**，未经授权的消息是“坏的客户端凭据”，可能的原因是什么？- 常见问题是用户使用了Movescount凭据，这些凭据不起作用。用户需要使用Suunto App凭据。确保你的授权头是正确的，详细信息请阅读授权流程部分。

似乎周末发生了停机，今天API的响应速度较慢，我能在某处看到状态吗？- 目前我们没有一个查看不同API端点状态的视图。我们正在研究这个问题。在周末，由于人们更加活跃并且做更多锻炼，你可以预期数据量会更大。我们的目标是在繁忙时期也能提供良好的API功能，但你也应该为在这些时期负载较高做好准备。在一年的开始，也会出现峰值，这是因为人们更加活跃。

**尝试通知API**

&#x20;为了接收有关新用户活动/锻炼的通知，开发人员应该实现通知处理程序。

Suunto合作伙伴通知服务将使用POST请求调用此处理程序，并传递了两个参数（请求编码：application/x-www-form-urlencoded）：用户名和workoutid。

使用用户名参数，你可以找到适当的访问令牌，这是在步骤4.5中获得的，用于访问用户数据（在JWT令牌中，用户名存储在用户字段中）。workoutid参数可用于获取FIT文件（参见步骤5.2）。

6.1. 创建用于接收通知的端点。

6.2. 通过编辑用户配置文件中的OAuth设置来设置通知处理程序信息。我们目前支持基本HTTP身份验证方案和简单基于令牌的身份验证。如果你选择使用基本HTTP身份验证，请在表单中填写通知访问令牌（用户名）和通知访问秘钥（密钥）字段。你也可以只设置通知访问令牌字段，这个令牌将作为Bearer令牌发送到授权头中的你的通知处理程序。

6.3 与Suunto App同步新的锻炼

6.4 你的处理程序将接收通知。新的锻炼通知按顺序处理，因此处理时间取决于系统的工作负载。
